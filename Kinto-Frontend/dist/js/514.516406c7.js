"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[514],{2556:function(e,a,t){var r=t(6265),s=t.n(r),i=t(8);const o="https://api.kintovn.com/api/v1/organization/";class l{getAllOrganizations(){return s().get(o+"list",{headers:(0,i.Z)()})}getAllSelectByUserOrganizations(){return s().get(o+"list-user",{headers:(0,i.Z)()})}getOrganizations(e){return s().get(o+e,{headers:(0,i.Z)()})}getOrganizationById(e){return s().get(o+e,{headers:(0,i.Z)()})}createOrganization(e){return s().post(o,e,{headers:(0,i.Z)()})}updateOrganization(e,a){return s().put(o+e,a,{headers:(0,i.Z)()})}deleteOrganizationById(e){return s().get(o+"delete/"+e,{headers:(0,i.Z)()})}}a["Z"]=new l},4514:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var r=t(3396),s=t(9242),i=t(7139);const o=(0,r.Uk)(" Form User "),l={class:"float-end text-danger"},n={class:"row mx-md-2"},d={class:"col-md-6"},u=(0,r._)("label",{for:"id",class:"form-label text"},"Id:",-1),c=(0,r._)("label",{for:"fullname",class:"form-label text"},"Fullname:",-1),h={class:"text-danger"},m=(0,r._)("label",{for:"email",class:"form-label text"},"Email:",-1),g={class:"text-danger"},p=["readonly"],f={class:"col-md-6"},w=(0,r._)("label",{for:"password",class:"form-label text"},"Password:",-1),z={class:"text-danger"},_=["required"],y=(0,r._)("label",{for:"confirmPassword",class:"form-label text"},"Confirm Password:",-1),b={class:"text-danger"},v=["required"],k=(0,r._)("label",{for:"createAt",class:"form-label text"},"Organization:",-1),C={class:"text-danger"},E=(0,r._)("label",{for:"createAt",class:"form-label text"},"Role:",-1),U={class:"form-control d-flex"},x=["hidden"],P=["value","checked","v-model"],I={class:"form-check-label",for:"{{role.id}}"},R={class:"text-center my-1"},$=(0,r.Uk)(" Back "),L={class:"btn btn-outline-primary rounded-pill ms-2 px-4",title:"create",type:"submit"},Z=(0,r.Uk)(" Create "),B={class:"btn btn-outline-success rounded-pill ms-2 px-4",title:"update",type:"submit"},W=(0,r.Uk)(" Update "),O=(0,r.Uk)(" Reset ");function S(e,a,t,S,V,F){const A=(0,r.up)("CIcon"),q=(0,r.up)("CCardHeader"),T=(0,r.up)("v-select"),D=(0,r.up)("CRow"),H=(0,r.up)("CCardBody"),N=(0,r.up)("CCardFooter"),Y=(0,r.up)("CCard"),K=(0,r.up)("CCol"),M=(0,r.up)("Loading");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r.Wm)(K,null,{default:(0,r.w5)((()=>[(0,r.Wm)(Y,null,{default:(0,r.w5)((()=>[(0,r._)("form",{onSubmit:a[9]||(a[9]=(0,s.iM)((e=>"null"==this.$route.params.id?F.createUser():F.updateUser()),["prevent"]))},[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r.Wm)(A,{icon:"cil-drop"}),o,(0,r._)("span",l,(0,i.zw)(V.message),1)])),_:1}),(0,r.Wm)(H,null,{default:(0,r.w5)((()=>[(0,r.Wm)(D,null,{default:(0,r.w5)((()=>[(0,r._)("div",n,[(0,r._)("div",d,[u,(0,r.wy)((0,r._)("input",{type:"text",class:"form-control bg-light",placeholder:"id auto increment...",name:"id",readonly:"","onUpdate:modelValue":a[0]||(a[0]=e=>V.id=e)},null,512),[[s.nr,V.id]]),c,(0,r._)("i",h,(0,i.zw)(V.fullnameError),1),(0,r.wy)((0,r._)("input",{type:"text",class:"form-control",placeholder:"fullname...",name:"fullname","onUpdate:modelValue":a[1]||(a[1]=e=>V.fullname=e),required:""},null,512),[[s.nr,V.fullname]]),m,(0,r._)("i",g,(0,i.zw)(V.emailError),1),(0,r.wy)((0,r._)("input",{type:"email",class:"form-control",placeholder:"email...",name:"email","onUpdate:modelValue":a[2]||(a[2]=e=>V.email=e),readonly:"null"!=this.$route.params.id,required:""},null,8,p),[[s.nr,V.email]])]),(0,r._)("div",f,[w,(0,r._)("i",z,(0,i.zw)(V.passwordError),1),(0,r.wy)((0,r._)("input",{type:"password",class:"form-control",placeholder:"password...",name:"password","onUpdate:modelValue":a[3]||(a[3]=e=>V.password=e),required:"null"==this.$route.params.id},null,8,_),[[s.nr,V.password]]),y,(0,r._)("i",b,(0,i.zw)(V.confirmPasswordError),1),(0,r.wy)((0,r._)("input",{type:"password",class:"form-control",placeholder:"confirm password...",name:"confirmPassword","onUpdate:modelValue":a[4]||(a[4]=e=>V.confirmPassword=e),required:"null"==this.$route.params.id},null,8,v),[[s.nr,V.confirmPassword]]),k,(0,r._)("i",C,(0,i.zw)(V.organizationError),1),(0,r.Wm)(T,{modelValue:V.organizationSelected,"onUpdate:modelValue":a[5]||(a[5]=e=>V.organizationSelected=e),options:V.options,label:"name",reduce:e=>e.id},null,8,["modelValue","options","reduce"])]),E,(0,r._)("div",U,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(V.roles,((e,t)=>((0,r.wg)(),(0,r.iD)("div",{class:"form-check form-switch me-3",key:t,hidden:"info.kintovn@gmail.com"==V.user.email},[(0,r._)("input",{name:"role",class:"form-check-input",type:"radio",value:e.id,checked:e.id==V.vCheck?e.id==V.vCheck:2==t,"v-model":V.vCheck,onChange:a[6]||(a[6]=e=>F.getValueRole(e))},null,40,P),(0,r._)("label",I,(0,i.zw)(e.roleName),1)],8,x)))),128)),(0,r._)("i",null,(0,i.zw)(V.role.roleName),1)])])])),_:1})])),_:1}),(0,r.Wm)(N,null,{default:(0,r.w5)((()=>[(0,r._)("div",R,[(0,r._)("button",{class:"btn btn-outline-info rounded-pill px-4",title:"back to list",onClick:a[7]||(a[7]=e=>F.backToList())},[(0,r.Wm)(A,{icon:S.icon.cilArrowLeft,size:"m"},null,8,["icon"]),$]),(0,r.wy)((0,r._)("button",L,[(0,r.Wm)(A,{icon:S.icon.cilPen,size:"m"},null,8,["icon"]),Z],512),[[s.F8,"null"==this.$route.params.id]]),(0,r.wy)((0,r._)("button",B,[(0,r.Wm)(A,{icon:S.icon.cilTrash,size:"m"},null,8,["icon"]),W],512),[[s.F8,"null"!=this.$route.params.id]]),(0,r._)("button",{class:"btn btn-outline-warning rounded-pill ms-2 px-4",title:"reset",onClick:a[8]||(a[8]=e=>F.resetForm())},[(0,r.Wm)(A,{icon:S.icon.cilReload,size:"m"},null,8,["icon"]),O])])])),_:1})],32)])),_:1})])),_:1})])),_:1}),(0,r.Wm)(M,{active:V.isLoading,"onUpdate:active":a[10]||(a[10]=e=>V.isLoading=e)},null,8,["active"])],64)}t(7658);var V=t(7726),F=t(6265),A=t.n(F),q=t(8);const T="https://api.kintovn.com/api/v1/role/";class D{getRoles(){return A().get(T+"list",{headers:(0,q.Z)()})}getRoleById(e){return A().get(T+e,{headers:(0,q.Z)()})}}var H=new D,N=t(2556),Y=t(6867),K={name:"FormUser",data(){return{id:"",fullname:"",email:"",password:"",confirmPassword:"",createAt:"",updateAt:"",message:"",vCheck:"",organizationSelected:"Chose organization...",isLoading:!1,emailError:"",fullnameError:"",passwordError:"",confirmPasswordError:"",organizationError:"",organization:{},user:{},role:{},roles:[],options:[]}},computed:{userId(){return this.$route.params.id}},methods:{getUserById(){"null"!==this.userId&&(this.isLoading=!0,V.Z.getUserById(this.userId).then((e=>{200==e.status&&(this.isLoading=!1,this.fullname=e.data.fullname,this.email=e.data.email,this.vCheck=e.data.role.id,this.organizationSelected=e.data.organization.id,this.user=e.data,this.organization=e.data.organization)})).catch((()=>{this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")})))},getRoles(){H.getRoles().then((e=>{this.roles=e.data,this.roles.forEach((e=>this.vCheck=e.id))}))},getOrganizationRepository(){N.Z.getAllSelectByUserOrganizations().then((e=>{this.options=e.data}))},createUser(){"Chose organization..."==this.organizationSelected?(this.message="Please fix the errors below.",this.organizationError=" Please select a organization"):this.password!=this.confirmPassword?(this.confirmPasswordError=" password & confirm password in the same!",this.passwordError=" password & confirm password in the same!",this.emailError="",this.fullnameError="",this.organizationError=""):(this.isLoading=!0,V.Z.createUser({fullname:this.fullname,password:this.password,email:this.email,organization:this.organization,role:this.role}).then((e=>{200==e.status&&(this.isLoading=!1,this.$swal.fire("Success!","Create successfully!","success"),this.$router.push("/user/list-user"))})).catch((e=>{this.isLoading=!1,this.$swal.fire("Failed!","Please check again!","error"),e.response.data.error==this.email+" already exists"?this.message=e.response.data.error:this.message="The system is crashing, please try again later"})))},updateUser(){""==this.fullname||"Chose organization..."==this.organizationSelected||""==this.email?("Chose organization..."==this.organizationSelected?this.organizationError=" Please select a organization":this.organizationError="",""==this.fullname?this.fullnameError="Fullname cannot be null!":this.fullnameError="",""==this.email?this.emailError="Email cannot be null!":this.emailError=""):(this.isLoading=!0,console.log(this.organization),V.Z.updateUser(this.userId,{fullname:this.fullname,email:this.email,organization:this.organization,role:this.role}).then((e=>{200==e.status&&(this.isLoading=!1,this.$swal.fire("Success!","Update successfully!","success"),this.$router.push("/user/list-user"))})).catch((e=>{this.isLoading=!1,this.$swal.fire("Failed!","Please check again!","error"),e.response.data.error==this.email+" already exists"?this.message=e.response.data.error:this.message="The system is crashing, please try again later"})))},getValueRole(e){this.vCheck=e.target.value,H.getRoleById(this.vCheck).then((e=>{this.role=e.data}))},getValueRoleById(){H.getRoleById(this.vCheck).then((e=>{this.role=e.data}))},getValueOrganization(e){N.Z.getOrganizationById(e).then((e=>{this.organization=e.data}))},resetForm(){this.$router.push("/user/form-user/null"),this.id="",this.fullname="",this.email="",this.password="",this.confirmPassword="",this.createAt="",this.updateAt="",this.message="",this.organizationSelected="Chose organization...",this.emailError="",this.fullnameError="",this.passwordError="",this.confirmPasswordError="",this.organizationError="","null"==this.$route.params.id&&window.location.reload()},backToList(){this.$router.push("/user/list-User")}},setup(){return{icon:Y}},watch:{vCheck(e,a){a!=e&&this.getValueRoleById()},organizationSelected(e,a){a!=e&&this.getValueOrganization(e)}},created(){this.getRoles(),this.getOrganizationRepository(),this.getUserById()},mounted(){this.vCheck}},M=t(89);const j=(0,M.Z)(K,[["render",S]]);var G=j}}]);
//# sourceMappingURL=514.516406c7.js.map