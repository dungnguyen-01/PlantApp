"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[431],{2556:function(e,a,t){var i=t(6265),n=t.n(i),s=t(8);const r="https://api.kintovn.com/api/v1/organization/";class o{getAllOrganizations(){return n().get(r+"list",{headers:(0,s.Z)()})}getAllSelectByUserOrganizations(){return n().get(r+"list-user",{headers:(0,s.Z)()})}getOrganizations(e){return n().get(r+e,{headers:(0,s.Z)()})}getOrganizationById(e){return n().get(r+e,{headers:(0,s.Z)()})}createOrganization(e){return n().post(r,e,{headers:(0,s.Z)()})}updateOrganization(e,a){return n().put(r+e,a,{headers:(0,s.Z)()})}deleteOrganizationById(e){return n().get(r+"delete/"+e,{headers:(0,s.Z)()})}}a["Z"]=new o},9431:function(e,a,t){t.r(a),t.d(a,{default:function(){return x}});var i=t(3396),n=t(9242),s=t(7139);const r=(0,i.Uk)(" Form Organization "),o={class:"float-end text-danger"},l={class:"row mx-md-2"},u={class:"col-md-5"},d=(0,i._)("label",{for:"id",class:"form-label text"},"Id:",-1),c={class:"col-md-7"},m=(0,i._)("label",{for:"name",class:"form-label text"},"Name:",-1),g={class:"text-danger"},h={class:"text-center my-1"},p=(0,i.Uk)(" Back "),z={class:"btn btn-outline-primary rounded-pill ms-2 px-4",title:"create",type:"submit"},f=(0,i.Uk)(" Create "),_={class:"btn btn-outline-success rounded-pill ms-2 px-4",title:"update",type:"submit"},w=(0,i.Uk)(" Update "),b=(0,i.Uk)(" Reset ");function y(e,a,t,y,O,k){const C=(0,i.up)("CIcon"),v=(0,i.up)("CCardHeader"),L=(0,i.up)("CRow"),x=(0,i.up)("CCardBody"),W=(0,i.up)("CCardFooter"),$=(0,i.up)("CCard"),Z=(0,i.up)("CCol"),U=(0,i.up)("Loading");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i.Wm)(Z,null,{default:(0,i.w5)((()=>[(0,i.Wm)($,null,{default:(0,i.w5)((()=>[(0,i._)("form",{onSubmit:a[4]||(a[4]=(0,n.iM)((e=>"null"==this.$route.params.id?k.createOrganization():k.updateOrganization()),["prevent"]))},[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[(0,i.Wm)(C,{icon:"cil-drop"}),r,(0,i._)("span",o,(0,s.zw)(O.message),1)])),_:1}),(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(L,null,{default:(0,i.w5)((()=>[(0,i._)("div",l,[(0,i._)("div",u,[d,(0,i.wy)((0,i._)("input",{type:"text",class:"form-control bg-light",placeholder:"id auto increment...",name:"id",readonly:"","onUpdate:modelValue":a[0]||(a[0]=e=>O.id=e)},null,512),[[n.nr,O.id]])]),(0,i._)("div",c,[m,(0,i._)("i",g,(0,s.zw)(O.nameError),1),(0,i.wy)((0,i._)("input",{type:"text",class:"form-control",placeholder:"Name organization...",name:"name","onUpdate:modelValue":a[1]||(a[1]=e=>O.name=e),required:""},null,512),[[n.nr,O.name]])])])])),_:1})])),_:1}),(0,i.Wm)(W,null,{default:(0,i.w5)((()=>[(0,i._)("div",h,[(0,i._)("button",{class:"btn btn-outline-info rounded-pill px-4",title:"back to list",onClick:a[2]||(a[2]=e=>k.backToList())},[(0,i.Wm)(C,{icon:y.icon.cilArrowLeft,size:"m"},null,8,["icon"]),p]),(0,i.wy)((0,i._)("button",z,[(0,i.Wm)(C,{icon:y.icon.cilPen,size:"m"},null,8,["icon"]),f],512),[[n.F8,"null"==this.$route.params.id]]),(0,i.wy)((0,i._)("button",_,[(0,i.Wm)(C,{icon:y.icon.cilTrash,size:"m"},null,8,["icon"]),w],512),[[n.F8,"null"!=this.$route.params.id]]),(0,i._)("button",{class:"btn btn-outline-warning rounded-pill ms-2 px-4",title:"reset",onClick:a[3]||(a[3]=e=>k.resetForm())},[(0,i.Wm)(C,{icon:y.icon.cilReload,size:"m"},null,8,["icon"]),b])])])),_:1})],32)])),_:1})])),_:1})])),_:1}),(0,i.Wm)(U,{active:O.isLoading,"onUpdate:active":a[5]||(a[5]=e=>O.isLoading=e)},null,8,["active"])],64)}t(7658);var O=t(2556),k=t(6867),C={name:"Form Organization",data(){return{id:"",name:"",message:"",nameError:"",isLoading:!1}},computed:{organizationId(){return this.$route.params.id}},methods:{getDetailOrganization(){"null"!==this.organizationId&&(this.isLoading=!0,O.Z.getOrganizationById(this.organizationId).then((e=>{200==e.status&&(this.isLoading=!1,this.id=e.data.id,this.name=e.data.name)})).catch((()=>{this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")})))},async createOrganization(){""==this.name?this.nameError="Name cannot be null!":(this.isLoading=!0,await O.Z.createOrganization({name:this.name}).then((e=>{200==e.status&&(this.isLoading=!1,this.$swal.fire("Success!","Create successfully!","success"),this.$router.push("/organization/list-organization"))})).catch((e=>{this.isLoading=!1,this.$swal.fire("Failed!","Please check again!","error"),e.response.data.error==this.name+" already exists"?this.message=e.response.data.error:this.message="The system is crashing, please try again later"})))},async updateOrganization(){""==this.name?this.nameError="Name cannot be null!":(this.isLoading=!0,await O.Z.updateOrganization(this.id,{name:this.name}).then((e=>{200==e.status&&(this.isLoading=!1,this.$swal.fire("Success!","Update successfully!","success"),this.$router.push("/organization/list-organization"))})).catch((e=>{this.isLoading=!1,this.$swal.fire("Failed!","Please check again!","error"),e.response.data.error==this.name+" already exists"?this.message=e.response.data.error:this.message="The system is crashing, please try again later"})))},resetForm(){this.$router.push("/organization/form-organization/null"),this.id="",this.name="",this.message=""},backToList(){this.$router.push("/organization/list-organization")}},setup(){return{icon:k}},watch:{message(e,a){a!=e&&this.createOrganization()}},created(){this.getDetailOrganization()}},v=t(89);const L=(0,v.Z)(C,[["render",y]]);var x=L}}]);
//# sourceMappingURL=431.06088d48.js.map