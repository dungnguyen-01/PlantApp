"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[314],{2319:function(e,t,l){var a=l(6265),n=l.n(a),o=l(8);const s="https://api.kintovn.com/api/v1/farm-diary/";class i{getFarmDiaryById(e){return n().get(s+e,{headers:(0,o.Z)()})}createFarmDiary(e){return n().post(s,e,{headers:(0,o.Z)()})}updateFarmDiary(e,t){return n().put(s+e,t,{headers:(0,o.Z)()})}deleteFarmDiaryById(e){return n()["delete"](s+e,{headers:(0,o.Z)()})}deleteFarmDiaryByPlantId(e){return n()["delete"](s+"plant/"+e,{headers:(0,o.Z)()})}}t["Z"]=new i},8618:function(e,t,l){var a=l(6265),n=l.n(a),o=l(8);const s="https://api.kintovn.com/api/v1/image/";class i{createImage(e){return n().post(s,e,{headers:(0,o.Z)()})}deleteImageById(e){return n()["delete"](s+e,{headers:(0,o.Z)()})}deleteImageByPlantId(e){return n()["delete"](s+"plant/"+e,{headers:(0,o.Z)()})}}t["Z"]=new i},4303:function(e,t,l){var a=l(6265),n=l.n(a),o=l(8);const s="https://api.kintovn.com/api/v1/location/";class i{getAllLocations(e){return n().get(s+"list"+e,{headers:(0,o.Z)()})}getLocations(e){return n().get(s+e,{headers:(0,o.Z)()})}getLocationById(e){return n().get(s+e,{headers:(0,o.Z)()})}createLocation(e){return n().post(s,e,{headers:(0,o.Z)()})}updateLocation(e,t){return n().put(s+e,t,{headers:(0,o.Z)()})}deleteLocationById(e){return n().get(s+"delete/"+e,{headers:(0,o.Z)()})}}t["Z"]=new i},1919:function(e,t,l){var a=l(6265),n=l.n(a),o=l(8);const s="https://api.kintovn.com/api/v1/plant/";class i{getPlants(e){return n().get(s+e,{headers:(0,o.Z)()})}getPlantById(e){return n().get(s+e,{headers:(0,o.Z)()})}createPlant(e){return n().post(s,e,{headers:(0,o.Z)()})}updatePlant(e,t){return n().put(s+e,t,{headers:(0,o.Z)()})}deletePlantById(e){return n()["delete"](s+e,{headers:(0,o.Z)()})}}t["Z"]=new i},2872:function(e,t,l){var a=l(6265),n=l.n(a),o=l(8);const s="https://api.kintovn.com/api/v1/plant-type/";class i{getAllPlantTypes(e){return n().get(s+"list"+e,{headers:(0,o.Z)()})}getPlantTypes(e){return n().get(s+e,{headers:(0,o.Z)()})}getPlantTypeById(e){return n().get(s+e,{headers:(0,o.Z)()})}createPlantType(e){return n().post(s,e,{headers:(0,o.Z)()})}updatePlantType(e,t){return n().put(s+e,t,{headers:(0,o.Z)()})}deletePlantTypeById(e){return n().get(s+"delete/"+e,{headers:(0,o.Z)()})}}t["Z"]=new i},6314:function(e,t,l){l.r(t),l.d(t,{default:function(){return A}});var a=l(3396),n=l(7139),o=l(9242);const s=(0,a.Uk)(" Plant"),i=["value"],r={class:"m-2"},d=(0,a.Uk)("Selected: "),u={class:"p-3 row"},c={class:"col-md-4 mt-2"},p={class:"col-md-4 mt-2"},h={class:"col-md-4 mt-2"},g=(0,a._)("hr",null,null,-1),m={class:"table-responsive-lg"},y={class:"table"},_=(0,a._)("thead",{class:"table-dark"},[(0,a._)("tr",null,[(0,a._)("th",null,"ID."),(0,a._)("th",null,"Code"),(0,a._)("th",null,"Plant Type"),(0,a._)("th",null,"Person in charge"),(0,a._)("th",null,"Location"),(0,a._)("th",null,"Create"),(0,a._)("th",null,"Update"),(0,a._)("th"),(0,a._)("th"),(0,a._)("th")])],-1),w={class:"cut_text_show"},P={style:{"min-width":"150px"}},f={class:"cut_text_show"},v={class:"cut_text_show"},b=["onClick"],Z=["onClick"],I=["onClick"],C=(0,a.Uk)("Previous "),T=(0,a.Uk)("Next");function k(e,t,l,k,L,B){const x=(0,a.up)("CIcon"),$=(0,a.up)("CCardHeader"),N=(0,a.up)("Loading"),U=(0,a.up)("CRow"),W=(0,a.up)("v-select"),D=(0,a.up)("CPaginationItem"),S=(0,a.up)("CPagination"),V=(0,a.up)("CCardBody"),z=(0,a.up)("CCard"),A=(0,a.up)("CCol");return(0,a.wg)(),(0,a.j4)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(z,null,{default:(0,a.w5)((()=>[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{icon:"cil-drop"}),s])),_:1}),(0,a.Wm)(N,{active:L.isLoading,"onUpdate:active":t[0]||(t[0]=e=>L.isLoading=e)},null,8,["active"]),(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>L.selected=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.options,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{value:e.value,key:t},(0,n.zw)(e.text),9,i)))),128))],512),[[o.bM,L.selected]]),(0,a._)("span",r,[d,(0,a._)("b",null,(0,n.zw)(L.selected),1)]),(0,a.wy)((0,a._)("button",{onClick:t[2]||(t[2]=e=>B.addPlant()),class:"btn btn-info text-light float-end mb-2"}," Add New Plant ",512),[[o.F8,"Admin"==L.role.roleName||"Editor"==L.role.roleName]])])])),_:1}),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",c,[(0,a.Wm)(W,{modelValue:L.plantTypeSelected,"onUpdate:modelValue":t[3]||(t[3]=e=>L.plantTypeSelected=e),options:L.optionsPlantType,label:"namePlantType",reduce:e=>e.id},null,8,["modelValue","options","reduce"])]),(0,a._)("div",p,[(0,a.Wm)(W,{modelValue:L.userSelected,"onUpdate:modelValue":t[4]||(t[4]=e=>L.userSelected=e),options:L.optionsUser,label:"data_item",reduce:e=>e.id},null,8,["modelValue","options","reduce"])]),(0,a._)("div",h,[(0,a.Wm)(W,{modelValue:L.locationSelected,"onUpdate:modelValue":t[5]||(t[5]=e=>L.locationSelected=e),options:L.optionsLocation,label:"address",reduce:e=>e.id},null,8,["modelValue","options","reduce"])])]),g,(0,a.wy)((0,a._)("i",null,"not found!",512),[[o.F8,0==L.plants.lengh]]),(0,a._)("div",m,[(0,a._)("table",y,[_,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.plants.content,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,[(0,a._)("div",w,[(0,a._)("p",null,(0,n.zw)(e.code),1)])]),(0,a._)("td",P,(0,n.zw)(e.plantType.namePlantType),1),(0,a._)("td",f,(0,n.zw)(e.user.fullname),1),(0,a._)("td",null,[(0,a._)("div",v,[(0,a._)("p",null,(0,n.zw)(e.location.address),1)])]),(0,a._)("td",null,(0,n.zw)(this.$formatDate.formatDate(e.createAt)),1),(0,a._)("td",null,(0,n.zw)(this.$formatDate.formatDate(e.updateAt)),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-outline-info rounded-pill p-0 px-4",title:"detail",onClick:t=>B.detailPlant(e.id)},[(0,a.Wm)(x,{icon:k.icon.cilCompress,size:"m"},null,8,["icon"])],8,b)]),(0,a._)("td",null,[(0,a.wy)((0,a._)("button",{class:"btn btn-outline-warning rounded-pill p-0 px-4",title:"edit",onClick:t=>B.updatePlant(e.id)},[(0,a.Wm)(x,{icon:k.icon.cilPen,size:"m"},null,8,["icon"])],8,Z),[[o.F8,"Admin"==L.role.roleName||"Editor"==L.role.roleName]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("button",{class:"btn btn-outline-danger rounded-pill p-0 px-4",title:"delete",onClick:t=>B.deletePlant(e.id)},[(0,a.Wm)(x,{icon:k.icon.cilTrash,size:"m"},null,8,["icon"])],8,I),[[o.F8,"Admin"==L.role.roleName||"Editor"==L.role.roleName]])])])))),128))])])])])),_:1}),(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)(S,{class:"pagination justify-content-center","aria-label":"Page navigation example"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(D,{style:{cursor:"pointer"},onClick:t[6]||(t[6]=e=>B.previousPage())},{default:(0,a.w5)((()=>[C])),_:1},512),[[o.F8,1!=L.pageNumber]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.plants.totalPages,((e,t)=>((0,a.wg)(),(0,a.j4)(D,{style:{cursor:"pointer"},key:t,onClick:t=>B.setPage(e),class:(0,n.C_)(e==L.pageNumber?"active":"")},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClick","class"])))),128)),(0,a.wy)((0,a.Wm)(D,{style:{cursor:"pointer"},hidden:0==L.plants.totalPages,onClick:t[7]||(t[7]=e=>B.nextPage())},{default:(0,a.w5)((()=>[T])),_:1},8,["hidden"]),[[o.F8,L.pageNumber!=L.plants.totalPages]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}l(7658);var L=l(3116),B=l(6867),x=l(1919),$=l(2872),N=l(8618),U=l(2319),W=l(7726),D=l(4303),S={name:"Plant",components:{CIcon:L.m},data(){return{status:!1,isLoading:!0,pageNumber:1,role:this.$store.state.auth.user.user.role,orgId:this.$store.state.auth.user.user.organization.id,plantTypeSelected:"Filter by plant type...",userSelected:"Filter by user...",locationSelected:"Filter by location...",plants:[],optionsUser:[],optionsLocation:[],optionsPlantType:[],selected:15,options:[{text:"15",value:"15"},{text:"25",value:"25"},{text:"50",value:"50"},{text:"100",value:"100"}]}},methods:{async fetchPlants(){x.Z.getPlants(`?plant_type=${this.plantTypeSelected}&location=${this.locationSelected}&pic=${this.userSelected}&size=${this.selected}&page=${this.pageNumber-1}&orgId=${this.orgId}`).then((e=>{200===e.status&&setTimeout((()=>{this.isLoading=!1,this.plants=e.data}),1e3)})).catch((()=>{this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")}))},updatePlant(e){this.$router.push(`/plant/form-plant/${e}`)},deletePlant(e){this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",confirmButtonColor:"#55c663",reverseButtons:!0}).then((t=>{t.isConfirmed&&(this.isLoading=!0,x.Z.deletePlantById(e).then((t=>{200===t.status&&(this.isLoading=!1,N.Z.deleteImageByPlantId(e).then((()=>{})),U.Z.deleteFarmDiaryByPlantId(e).then((()=>{})),this.$swal.fire("Deleted!","You have successfully deleted.","success"),this.fetchPlants())})).catch((()=>{this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")})))}))},getAllPlantType(){$.Z.getAllPlantTypes(`?orgId=${this.orgId}`).then((e=>{this.optionsPlantType=e.data}))},getValuePlantType(e){null!=e?$.Z.getPlantTypeById(e).then((()=>{this.fetchPlants()})):window.location.reload()},changeStatus(){this.status=!0},detailPlant(e){this.$router.push(`/plant/plant-detail/${e}`)},addPlant(){this.$router.push("/plant/form-plant/null")},getUserRepository(){W.Z.getAllUsers(`?orgId=${this.orgId}`).then((e=>{this.optionsUser=e.data,this.optionsUser.map((function(e){return e.data_item=e.fullname+" -  - ("+e.role.roleName+")"}))}))},getValueUser(e){null!=e?W.Z.getUserByIdAll(e).then((e=>{this.user=e.data,this.fetchPlants()})):window.location.reload()},getLocationRepository(){D.Z.getAllLocations(`?orgId=${this.orgId}`).then((e=>{this.optionsLocation=e.data}))},getValueLocation(e){null!=e?D.Z.getLocationById(e).then((e=>{this.location=e.data,this.fetchPlants()})):window.location.reload()},setPage(e){this.pageNumber=e},nextPage(){this.pageNumber=this.pageNumber+1},previousPage(){this.pageNumber=this.pageNumber-1}},created(){this.fetchPlants(),this.getAllPlantType(),this.getUserRepository(),this.getLocationRepository()},setup(){return{icon:B}},computed(){this.fetchPlants()},watch:{selected(e,t){e!=t&&this.fetchPlants()},plantTypeSelected(e,t){t!=e&&this.getValuePlantType(e)},userSelected(e,t){t!=e&&this.getValueUser(e)},locationSelected(e,t){t!=e&&this.getValueLocation(e)},pageNumber(e,t){t!=e&&this.fetchPlants()}}},V=l(89);const z=(0,V.Z)(S,[["render",k]]);var A=z}}]);
//# sourceMappingURL=314.1ba0b0c0.js.map