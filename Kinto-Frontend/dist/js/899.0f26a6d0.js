"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[899],{6899:function(e,t,l){l.r(t),l.d(t,{default:function(){return P}});var n=l(3396),i=l(7139),s=l(9242);const a=(0,n.Uk)(" List Location "),u=["value"],r={class:"m-2"},o=(0,n.Uk)("Selected: "),d=(0,n.Uk)(" Add User "),c={class:"table-responsive-lg"},p={class:"table"},h=(0,n._)("thead",{class:"table-dark"},[(0,n._)("tr",null,[(0,n._)("th",null,"No."),(0,n._)("th",null,"Email"),(0,n._)("th",null,"Fullname"),(0,n._)("th",null,"Role"),(0,n._)("th",null,"Organization"),(0,n._)("th",null,"Create"),(0,n._)("th",null,"Update"),(0,n._)("th"),(0,n._)("th"),(0,n._)("th")])],-1),m={style:{"min-width":"150px"}},g={style:{"min-width":"150px"}},_=["onClick"],w=["onClick"],f=["hidden","onClick"],b=(0,n.Uk)("Previous "),C=(0,n.Uk)("Next");function v(e,t,l,v,k,U){const x=(0,n.up)("CIcon"),z=(0,n.up)("CCardHeader"),y=(0,n.up)("CButton"),P=(0,n.up)("CRow"),W=(0,n.up)("CPaginationItem"),N=(0,n.up)("CPagination"),$=(0,n.up)("CCardBody"),D=(0,n.up)("CCard"),L=(0,n.up)("CCol"),B=(0,n.up)("Loading");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(L,null,{default:(0,n.w5)((()=>[(0,n.Wm)(D,null,{default:(0,n.w5)((()=>[(0,n.Wm)(z,null,{default:(0,n.w5)((()=>[(0,n.Wm)(x,{icon:"cil-drop"}),a])),_:1}),(0,n.Wm)($,null,{default:(0,n.w5)((()=>[(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n._)("div",null,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>k.selectSizePage=e)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(k.options,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{value:e.value,key:t},(0,i.zw)(e.text),9,u)))),128))],512),[[s.bM,k.selectSizePage]]),(0,n._)("span",r,[o,(0,n._)("b",null,(0,i.zw)(k.selectSizePage),1)]),(0,n.Wm)(y,{onClick:t[1]||(t[1]=e=>U.addUser()),class:"btn btn-info text-light float-end mb-2"},{default:(0,n.w5)((()=>[d])),_:1})])])),_:1}),(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n._)("div",c,[(0,n._)("table",p,[h,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(k.users.content,((e,t)=>((0,n.wg)(),(0,n.iD)("tr",{key:t},[(0,n._)("td",null,(0,i.zw)(t+1),1),(0,n._)("td",null,(0,i.zw)(e.email),1),(0,n._)("td",m,(0,i.zw)(e.fullname),1),(0,n._)("td",null,(0,i.zw)(e.role.roleName),1),(0,n._)("td",g,(0,i.zw)(e.organization.name),1),(0,n._)("td",null,(0,i.zw)(this.$formatDate.formatDate(e.createAt)),1),(0,n._)("td",null,(0,i.zw)(this.$formatDate.formatDate(e.updateAt)),1),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-outline-info rounded-pill p-0 px-4 ml-1",title:"detail",onClick:t=>U.detailUser(e.id)},[(0,n.Wm)(x,{icon:v.icon.cilCompress,size:"m"},null,8,["icon"])],8,_)]),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-outline-warning rounded-pill p-0 px-4 mx-2",title:"edit",onClick:t=>U.updateUser(e.id)},[(0,n.Wm)(x,{icon:v.icon.cilPen,size:"m"},null,8,["icon"])],8,w)]),(0,n._)("td",null,[(0,n._)("button",{class:"btn btn-outline-danger rounded-pill p-0 px-4",title:"delete",hidden:"info.kintovn@gmail.com"==e.email,onClick:t=>U.deleteUser(e.id)},[(0,n.Wm)(x,{icon:v.icon.cilTrash,size:"m"},null,8,["icon"])],8,f)])])))),128))])])])])),_:1}),(0,n.Wm)(P,null,{default:(0,n.w5)((()=>[(0,n.Wm)(N,{class:"pagination justify-content-center","aria-label":"Page navigation example"},{default:(0,n.w5)((()=>[(0,n.wy)((0,n.Wm)(W,{style:{cursor:"pointer"},onClick:t[2]||(t[2]=e=>U.previousPage())},{default:(0,n.w5)((()=>[b])),_:1},512),[[s.F8,1!=k.pageNumber]]),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(k.users.totalPages,((e,t)=>((0,n.wg)(),(0,n.j4)(W,{style:{cursor:"pointer"},key:t,onClick:t=>U.setPage(e),class:(0,i.C_)(e==k.pageNumber?"active":"")},{default:(0,n.w5)((()=>[(0,n.Uk)((0,i.zw)(e),1)])),_:2},1032,["onClick","class"])))),128)),(0,n.wy)((0,n.Wm)(W,{style:{cursor:"pointer"},hidden:0==k.users.totalPages,onClick:t[3]||(t[3]=e=>U.nextPage())},{default:(0,n.w5)((()=>[C])),_:1},8,["hidden"]),[[s.F8,k.pageNumber!=k.users.totalPages]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,n.Wm)(B,{active:k.isLoading,"onUpdate:active":t[4]||(t[4]=e=>k.isLoading=e)},null,8,["active"])],64)}l(7658);var k=l(7726),U=l(6867),x={name:"User",data(){return{users:[],user:"",isLoading:!0,selectSizePage:15,pageNumber:1,options:[{text:"15",value:"15"},{text:"25",value:"25"},{text:"50",value:"50"},{text:"100",value:"100"}]}},methods:{fetchUsers(){console.log(this.pageNumber),k.Z.getUsers(`?size=${this.selectSizePage}&page=${this.pageNumber-1}`).then((e=>{200===e.status&&(setTimeout((()=>{this.isLoading=!1}),1e3),this.users=e.data)})).catch((e=>{this.isLoading=!1,"Access is denied"==e.response.error?this.$router.push("/pages/400"):this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")}))},detailUser(e){this.$router.push(`/user/detail-user/${e}`)},addUser(){this.$router.push("/user/form-user/null")},updateUser(e){this.$router.push(`/user/form-user/${e}`)},deleteUser(e){this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",confirmButtonColor:"#55c663",reverseButtons:!0}).then((t=>{t.isConfirmed&&(this.isLoading=!0,k.Z.deleteUserById(e).then((e=>{200===e.status&&(this.isLoading=!1,this.fetchUsers(),this.$swal.fire("Deleted!","You have successfully deleted.","success"))})).catch((()=>{this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")})))}))},setPage(e){this.pageNumber=e},nextPage(){this.pageNumber=this.pageNumber+1},previousPage(){this.pageNumber=this.pageNumber-1}},created(){this.fetchUsers()},setup(){return{icon:U}},watch:{pageNumber(e,t){t!=e&&this.fetchUsers()}}},z=l(89);const y=(0,z.Z)(x,[["render",v]]);var P=y}}]);
//# sourceMappingURL=899.0f26a6d0.js.map