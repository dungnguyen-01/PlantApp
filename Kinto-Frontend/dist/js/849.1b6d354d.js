"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[849],{2556:function(e,a,t){var l=t(6265),s=t.n(l),o=t(8);const i="https://api.kintovn.com/api/v1/organization/";class n{getAllOrganizations(){return s().get(i+"list",{headers:(0,o.Z)()})}getAllSelectByUserOrganizations(){return s().get(i+"list-user",{headers:(0,o.Z)()})}getOrganizations(e){return s().get(i+e,{headers:(0,o.Z)()})}getOrganizationById(e){return s().get(i+e,{headers:(0,o.Z)()})}createOrganization(e){return s().post(i,e,{headers:(0,o.Z)()})}updateOrganization(e,a){return s().put(i+e,a,{headers:(0,o.Z)()})}deleteOrganizationById(e){return s().get(i+"delete/"+e,{headers:(0,o.Z)()})}}a["Z"]=new n},3849:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var l=t(3396),s=t(9242),o=t(7139);const i={class:"bg-light min-vh-100 d-flex flex-row align-items-center"},n=(0,l._)("h1",{class:"mb-5"},"Register",-1),r={class:"text-medium-emphasis"},d={class:"text-danger float-end"},u=(0,l.Uk)("@"),m={class:"d-grid"},c=(0,l.Uk)("Create Account"),p=(0,l.Uk)("Chose organization"),g={class:"mb-5"},h=(0,l._)("label",{for:"createAt",class:"form-label text"},"Organization:",-1),w={class:"text-danger float-end"},f=(0,l.Uk)(" Close "),_=(0,l.Uk)("Register");function C(e,a,t,C,W,z){const b=(0,l.up)("CIcon"),y=(0,l.up)("CInputGroupText"),v=(0,l.up)("CFormInput"),k=(0,l.up)("CInputGroup"),x=(0,l.up)("CButton"),V=(0,l.up)("CForm"),R=(0,l.up)("CCardBody"),U=(0,l.up)("CCard"),O=(0,l.up)("CCol"),S=(0,l.up)("CRow"),Z=(0,l.up)("CContainer"),P=(0,l.up)("CModalTitle"),D=(0,l.up)("CModalHeader"),I=(0,l.up)("v-select"),L=(0,l.up)("CModalBody"),B=(0,l.up)("CModalFooter"),M=(0,l.up)("CModal"),A=(0,l.up)("Loading");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",i,[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(S,{class:"justify-content-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(O,{md:12,lg:10,xl:6},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"mx-4 mx-sm-0"},{default:(0,l.w5)((()=>[(0,l.Wm)(R,{class:"p-4"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{onSubmit:(0,s.iM)(z.submit,["prevent"])},{default:(0,l.w5)((()=>[n,(0,l._)("p",r,[(0,l._)("i",d,(0,o.zw)(W.message),1)]),(0,l.Wm)(k,{class:"mb-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{icon:"cil-user"})])),_:1}),(0,l.Wm)(v,{placeholder:"Fullname",autocomplete:"fullname",modelValue:W.fullname,"onUpdate:modelValue":a[0]||(a[0]=e=>W.fullname=e),required:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(k,{class:"mb-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(v,{placeholder:"Email",autocomplete:"email",modelValue:W.email,"onUpdate:modelValue":a[1]||(a[1]=e=>W.email=e),required:"",type:"email"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(k,{class:"mb-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{icon:"cil-lock-locked"})])),_:1}),(0,l.Wm)(v,{type:"password",placeholder:"Password",autocomplete:"new-password",modelValue:W.password,"onUpdate:modelValue":a[2]||(a[2]=e=>W.password=e),required:""},null,8,["modelValue"])])),_:1}),(0,l.Wm)(k,{class:"mb-3"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{icon:"cil-lock-locked"})])),_:1}),(0,l.Wm)(v,{type:"password",placeholder:"Repeat password",autocomplete:"new-password",modelValue:W.repeatPassword,"onUpdate:modelValue":a[3]||(a[3]=e=>W.repeatPassword=e),required:""},null,8,["modelValue"])])),_:1}),(0,l._)("div",m,[(0,l.Wm)(x,{color:"success",type:"submit"},{default:(0,l.w5)((()=>[c])),_:1})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})]),(0,l.Wm)(M,{ref:"my-modal",backdrop:"static",visible:W.xlDemo,onClose:a[7]||(a[7]=()=>{W.xlDemo=!1})},{default:(0,l.w5)((()=>[(0,l.Wm)(D,null,{default:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[p])),_:1})])),_:1}),(0,l.Wm)(L,null,{default:(0,l.w5)((()=>[(0,l._)("div",g,[h,(0,l._)("i",w,(0,o.zw)(W.message),1),(0,l.Wm)(I,{modelValue:W.organizationSelected,"onUpdate:modelValue":a[4]||(a[4]=e=>W.organizationSelected=e),options:W.options,label:"name",reduce:e=>e.id},null,8,["modelValue","options","reduce"])])])),_:1}),(0,l.Wm)(B,null,{default:(0,l.w5)((()=>[(0,l.Wm)(x,{color:"secondary",onClick:a[5]||(a[5]=()=>{W.xlDemo=!1})},{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(x,{color:"primary",onClick:a[6]||(a[6]=e=>z.handleRegister())},{default:(0,l.w5)((()=>[_])),_:1})])),_:1})])),_:1},8,["visible"]),(0,l.Wm)(A,{active:W.isLoading,"onUpdate:active":a[8]||(a[8]=e=>W.isLoading=e)},null,8,["active"])],64)}t(7658);var W=t(7726),z=t(2556),b={name:"Register",data(){return{fullname:"",email:"",password:"",repeatPassword:"",message:"",organizationSelected:"Chose organization...",xlDemo:!1,isLoading:!1,options:[]}},methods:{async submit(){this.password!=this.repeatPassword?this.message="Repeat password & Password need in the same!":this.xlDemo=!0},async handleRegister(){"Chose organization..."==this.organizationSelected?this.message="Please select a organization":(this.isLoading=!0,await W.Z.register({fullname:this.fullname,password:this.password,email:this.email,orgId:this.organizationSelected}).then((e=>{setTimeout((()=>{200==e.status&&(this.isLoading=!1,this.$swal.fire("Register Success!","Now go to login!","success"),this.$router.push("/pages/login"))}),2e3)})).catch((e=>{setTimeout((()=>{this.isLoading=!1,this.xlDemo=!1}),1500),this.$swal.fire("Register failed!","Please check again!","error"),e.response.this.error==this.email+" already exits!"?this.message=e.response.this.error:this.message="The system is crashing, please try again later"})))},getOrganizationRepository(){z.Z.getAllOrganizations().then((e=>{this.options=e.data}))}},created(){this.getOrganizationRepository()},watch:{organizationSelected(e,a){e!=a&&"Chose organization..."!==e&&(this.organizationSelected=e)}}},y=t(89);const v=(0,y.Z)(b,[["render",C]]);var k=v}}]);
//# sourceMappingURL=849.1b6d354d.js.map