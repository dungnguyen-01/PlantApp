"use strict";(self["webpackChunk_coreui_coreui_free_vue_admin_template"]=self["webpackChunk_coreui_coreui_free_vue_admin_template"]||[]).push([[823],{4303:function(e,t,o){var a=o(6265),n=o.n(a),i=o(8);const l="https://api.kintovn.com/api/v1/location/";class s{getAllLocations(e){return n().get(l+"list"+e,{headers:(0,i.Z)()})}getLocations(e){return n().get(l+e,{headers:(0,i.Z)()})}getLocationById(e){return n().get(l+e,{headers:(0,i.Z)()})}createLocation(e){return n().post(l,e,{headers:(0,i.Z)()})}updateLocation(e,t){return n().put(l+e,t,{headers:(0,i.Z)()})}deleteLocationById(e){return n().get(l+"delete/"+e,{headers:(0,i.Z)()})}}t["Z"]=new s},9823:function(e,t,o){o.r(t),o.d(t,{default:function(){return x}});var a=o(3396),n=o(7139),i=o(9242);const l=(0,a.Uk)(" List Location "),s=["value"],r={class:"m-2"},u=(0,a.Uk)("Selected: "),c=(0,a.Uk)(" Add Location "),d={class:"table-responsive-lg"},h={class:"table"},g=(0,a._)("thead",{class:"table-dark"},[(0,a._)("tr",null,[(0,a._)("th",null,"ID"),(0,a._)("th",null,"Code"),(0,a._)("th",null,"Address"),(0,a._)("th",null,"Create"),(0,a._)("th",null,"Update"),(0,a._)("th"),(0,a._)("th"),(0,a._)("th")])],-1),p={class:"cut_text_show"},m=["onClick"],_=["onClick"],w=["onClick"],f=(0,a.Uk)("Previous "),b=(0,a.Uk)("Next");function L(e,t,o,L,C,v){const k=(0,a.up)("CIcon"),y=(0,a.up)("CCardHeader"),P=(0,a.up)("CButton"),x=(0,a.up)("CRow"),z=(0,a.up)("CPaginationItem"),N=(0,a.up)("CPagination"),W=(0,a.up)("CCardBody"),$=(0,a.up)("CCard"),D=(0,a.up)("CCol"),B=(0,a.up)("Loading");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)($,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{icon:"cil-drop"}),l])),_:1}),(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.wy)((0,a._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.selectSizePage=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.options,((e,t)=>((0,a.wg)(),(0,a.iD)("option",{value:e.value,key:t},(0,n.zw)(e.text),9,s)))),128))],512),[[i.bM,C.selectSizePage]]),(0,a._)("span",r,[u,(0,a._)("b",null,(0,n.zw)(C.selectSizePage),1)]),(0,a.wy)((0,a.Wm)(P,{onClick:t[1]||(t[1]=e=>v.addLoaction()),class:"btn btn-info text-light float-end mb-2"},{default:(0,a.w5)((()=>[c])),_:1},512),[[i.F8,"Admin"==C.role.roleName||"Editor"==C.role.roleName]])])])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("table",h,[g,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.locations.content,((e,t)=>((0,a.wg)(),(0,a.iD)("tr",{key:t},[(0,a._)("td",null,(0,n.zw)(t+1),1),(0,a._)("td",null,(0,n.zw)(e.code),1),(0,a._)("td",null,[(0,a._)("div",p,[(0,a._)("p",null,(0,n.zw)(e.address),1)])]),(0,a._)("td",null,(0,n.zw)(this.$formatDate.formatDate(e.createAt)),1),(0,a._)("td",null,(0,n.zw)(this.$formatDate.formatDate(e.updateAt)),1),(0,a._)("td",null,[(0,a._)("button",{class:"btn btn-outline-info rounded-pill p-0 px-4",title:"detail",onClick:t=>v.detailLocation(e.id)},[(0,a.Wm)(k,{icon:L.icon.cilCompress,size:"m"},null,8,["icon"])],8,m)]),(0,a._)("td",null,[(0,a.wy)((0,a._)("button",{class:"btn btn-outline-warning rounded-pill p-0 px-4",title:"edit",onClick:t=>v.updateLocation(e.id)},[(0,a.Wm)(k,{icon:L.icon.cilPen,size:"m"},null,8,["icon"])],8,_),[[i.F8,"Admin"==C.role.roleName||"Editor"==C.role.roleName]])]),(0,a._)("td",null,[(0,a.wy)((0,a._)("button",{class:"btn btn-outline-danger rounded-pill p-0 px-4",title:"delete",onClick:t=>v.deleteLocation(e.id)},[(0,a.Wm)(k,{icon:L.icon.cilTrash,size:"m"},null,8,["icon"])],8,w),[[i.F8,"Admin"==C.role.roleName||"Editor"==C.role.roleName]])])])))),128))])])])])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(N,{class:"pagination justify-content-center","aria-label":"Page navigation example"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(z,{style:{cursor:"pointer"},onClick:t[2]||(t[2]=e=>v.previousPage())},{default:(0,a.w5)((()=>[f])),_:1},512),[[i.F8,1!=C.pageNumber]]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(C.locations.totalPages,((e,t)=>((0,a.wg)(),(0,a.j4)(z,{style:{cursor:"pointer"},key:t,onClick:t=>v.setPage(e),class:(0,n.C_)(e==C.pageNumber?"active":"")},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e),1)])),_:2},1032,["onClick","class"])))),128)),(0,a.wy)((0,a.Wm)(z,{style:{cursor:"pointer"},hidden:0==C.locations.totalPages,onClick:t[3]||(t[3]=e=>v.nextPage())},{default:(0,a.w5)((()=>[b])),_:1},8,["hidden"]),[[i.F8,C.pageNumber!=C.locations.totalPages]])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),(0,a.Wm)(B,{active:C.isLoading,"onUpdate:active":t[4]||(t[4]=e=>C.isLoading=e)},null,8,["active"])],64)}o(7658);var C=o(4303),v=o(6867),k={name:"Location",data(){return{pageNumber:1,locations:[],role:this.$store.state.auth.user.user.role,orgId:this.$store.state.auth.user.user.organization.id,responseSuccess:!0,isLoading:!0,selectSizePage:15,options:[{text:"15",value:"15"},{text:"25",value:"25"},{text:"50",value:"50"},{text:"100",value:"100"}]}},methods:{fetchLocations(){C.Z.getLocations(`?size=${this.selectSizePage}&page=${this.pageNumber-1}&orgId=${this.orgId}`).then((e=>{200===e.status&&(setTimeout((()=>{this.isLoading=!1}),1e3),this.locations=e.data)})).catch((()=>{this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")}))},detailLocation(e){this.$router.push(`/location/detail-location/${e}`)},addLoaction(){this.$router.push("/location/form-location/null")},updateLocation(e){this.$router.push(`/location/form-location/${e}`)},deleteLocation(e){this.$swal({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",confirmButtonColor:"#55c663",reverseButtons:!0}).then((t=>{t.isConfirmed&&(this.isLoading=!0,C.Z.deleteLocationById(e).then((e=>{200===e.status&&(this.isLoading=!1,this.fetchLocations(),this.$swal.fire("Deleted!","You have successfully deleted.","success"))})).catch((e=>{console.log(e),this.isLoading=!1,this.$swal.fire("Warning!","The system is experiencing an error, please reload the page","warning")})))}))},setPage(e){this.pageNumber=e},nextPage(){this.pageNumber=this.pageNumber+1},previousPage(){this.pageNumber=this.pageNumber-1}},created(){this.fetchLocations()},setup(){return{icon:v}},watch:{selectSizePage(e,t){t!=e&&this.fetchLocations()},pageNumber(e,t){t!=e&&this.fetchLocations()}}},y=o(89);const P=(0,y.Z)(k,[["render",L]]);var x=P}}]);
//# sourceMappingURL=823.97cae0c1.js.map